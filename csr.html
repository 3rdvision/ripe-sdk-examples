<!DOCTYPE html>
<html>
<script type="text/javascript" src="http://localhost:8000/static/js/ripe.three.min.js?compress=js"></script>
<link rel="stylesheet" type="text/css" href="https://sdk.platforme.com/css/ripe.css" />

<body>
	<div id="configurator" class="configurator"></div>
	<input
		id="input-initials"
		class="input-initials"
		type="text"
		placeholder="Initials text"
		oninput="onInitialsInput(event)"
	/>
</body>

<style>
	body {
		font-family: Arial;
	}

	#configurator {
		cursor: grab;
		width: 1250px;
		height: 1250px;
	}

	#configurator:active {
		cursor: grabbing;
	}
</style>

<script>
	let initialsTimeout = null;

	window.onload = async function () {
		// initializes ripe instance
		window.ripeInstance = new Ripe({
			brand: "dummy",
			model: "cube",
			url: "https://ripe-core-now.platforme.com/api/"
		});

		// setup configurator
		const configuratorElement = document.getElementById("configurator");
		const configurator = window.ripeInstance.bindConfigurator(configuratorElement, {
			width: 1250,
			height: 1250,
			type: "csr"
		});

		// waits for ripe instance to load
		await window.ripeInstance.isReady();
	};

	async function onInitialsInput(event) {
		clearTimeout(initialsTimeout);
		debounceTimeout = setTimeout(async () => {
			const text = event.target.value;
			await window.ripeInstance.trigger("initials", text, null, {});
		}, 250);
	}
</script>

</html>
